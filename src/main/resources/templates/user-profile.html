<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head th:insert="~{fragments/header :: header}"/>
  <body>
    <script type="text/javascript" th:src="@{/js/user.js}"></script>
    <nav class="navbar navbar-expand-lg bg-body-tertiary" th:replace="~{fragments/nav :: nav}"></nav>
    <main role="main" class="container-sm">

      <div class="row col-md-6 offset-md-3">
        <div class="alert alert-success alert-dismissible" role="alert" th:if="${param.success}">
          <div>
            Profile update successfully!
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <div class="alert alert-danger alert-dismissible" role="alert" th:if="${param.error}">
          <div>
            Profile update failed!
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <form class="row">
          <div class="container row g-3" th:fragment="userInfoForm">
            <div class="d-flex align-items-center">
              <div class="col-2">
                <label th:for="userId + ${userId}" class="col-form-label">User Id</label>
              </div>
              <div class="col-2">
                <input type="text" class="form-control" th:id="userId + ${userId}" th:value="${userId}" disabled>
              </div>
            </div>
            <div class="col-md-6">
              <label th:for="email + ${email}" class="form-label">Email <span class="text-danger">*</span></label>
              <input type="email" class="form-control" th:id="email + ${email}" th:value="${email}" autocomplete="email" disabled>
            </div>
            <div class="col-md-6">
              <label th:for="password + ${userId}" class="form-label">Password <span class="text-danger">*</span></label>
              <input type="password" class="form-control" th:id="password + ${userId}" th:value="${password}" disabled>
            </div>
            <div class="col-md-6">
              <label th:for="fullName + ${fullName}" class="form-label">Full Name <span class="text-danger">*</span></label>
              <input type="text" class="form-control" th:id="fullName + ${fullName}" th:value="${fullName}">
            </div>
            <div class="col-md-6">
              <label th:for="phone + ${userId} + ${phone}" class="form-label">Phone Number <span class="text-danger">*</span></label>
              <input type="tel" class="form-control" th:id="phone + ${userId} + ${phone}" th:value="${phone}" autocomplete="tel">
            </div>
            <div class="col-12">
              <label th:for="addr + ${userId}" class="form-label">Address</label>
              <input type="text" class="form-control" th:id="addr + ${userId}" value="1234 Main St">
            </div>
            <div class="col-12">
              <label th:for="addr2 + ${userId}" class="form-label">Address 2</label>
              <input type="text" class="form-control" th:id="addr2 + ${userId}" value="Apartment, studio, or floor">
            </div>
            <div class="col-md-6">
              <label th:for="city + ${userId}" class="form-label">City</label>
              <input type="text" class="form-control" th:id="city + ${userId}">
            </div>
            <div class="col-md-4">
              <label th:for="state + ${userId}" class="form-label">State</label>
              <select th:id="state + ${userId}" class="form-select">
                <option selected>Choose...</option>
                <option>...</option>
              </select>
            </div>
            <div class="col-md-2">
              <label th:for="zip + ${userId}" class="form-label">Zip</label>
              <input type="text" class="form-control" th:id="zip + ${userId}">
            </div>
            <p class="form-label">Please describe what role you want to be:</p>
            <div class="form-check offset-md-1">
              <input class="form-check-input"
                     type="radio"
                     name="role"
                     th:id="role-user + ${userId}"
                     data-value='{"id": 3, "name":"user"}'
                     th:checked="${role} eq 'user'">
              <label class="form-check-label" th:for="role-user + ${userId}">user</label>
            </div>
            <div class="form-check offset-md-1">
              <input class="form-check-input"
                     type="radio"
                     name="role"
                     th:id="role-vendor + ${userId}"
                     data-value='{"id": 2, "name":"vendor"}'
                     th:checked="${role} eq 'vendor'">
              <label class="form-check-label" th:for="role-vendor + ${userId}">vendor</label>
            </div>
            <div class="form-check offset-md-1">
              <input class="form-check-input"
                     type="radio"
                     name="role"
                     th:id="role-admin + ${userId}"
                     data-value='{"id": 1, "name":"admin"}'
                     th:checked="${role} eq 'admin'">
              <label class="form-check-label" th:for="role-admin + ${userId}">admin</label>
            </div>
          </div>

          <div class="col-12">
            <button type="button"
                    class="btn btn-primary"
                    th:onclick="register()"
                    th:unless="${currentContext} == '/user-profile'"
                    th:text="Register"/>
            <button type="button"
                    class="btn btn-primary"
                    th:onclick="save()"
                    th:if="${currentContext} == '/user-profile'"
                    th:text="Save"/>
          </div>
        </form>
      </div>
    </main>
  </body>
  <footer th:insert="~{fragments/footer :: footer}" />
</html>

<!-- TODO: use fragment parameters https://stackoverflow.com/a/22121676 -->
